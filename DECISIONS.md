# DECISIONS.md — Ключевые архитектурные решения

## 1. Выбор стека технологий
**Решение:** React + Node.js + SQLite + TypeScript
**Почему:** У меня есть опыт работы с этим стеком, что позволило быстро создать рабочий прототип. TypeScript обеспечивает типизацию и уменьшает количество ошибок. SQLite не требует отдельного сервера БД, что упрощает локальный запуск.

## 2. Защита от гонки запросов
**Решение:** Использовала транзакции SQLite с проверкой версии записи (optimistic locking).
**Альтернативы:** Блокировка строки SELECT ... FOR UPDATE (не поддерживается в SQLite), очередь запросов на уровне приложения.
**Почему так:** Обеспечивает атомарность операции и предотвращает одновременное взятие заявки двумя мастерами. При конфликте второй запрос получает ошибку 409.

## 3. Авторизация и роли
**Решение:** Упрощенная авторизация через выбор роли на клиенте. В БД созданы тестовые пользователи: dispatcher, master1, master2.
**Почему:** В рамках тестового задания важнее показать работу с заявками, чем сложную систему аутентификации. При необходимости можно легко добавить JWT.

## 4. Структура проекта
**Решение:** Разделение на frontend и backend с отдельными package.json и Dockerfile.
**Почему:** Чистая архитектура, возможность независимого развертывания, соответствует реальным проектам. Легко масштабировать.

## 5. Работа с AI
**Решение:** Использовала ChatGPT и Deepseek для генерации шаблонного кода (компоненты, базовые роуты), но всю логику работы со статусами, безопасность и защиту от гонки писала и тестировала вручную.
**Почему:** AI ускоряет разработку, но критически важные места требуют полного понимания и ручного контроля.

## 6. Docker
**Решение:** Docker Compose для одновременного запуска frontend и backend.
**Почему:** Упрощает развертывание и гарантирует, что проект запустится на любом компьютере одной командой `docker-compose up`.

## 7. Обработка ошибок
**Решение:** На backend — возврат понятных HTTP статусов (400, 409, 500). На frontend — вывод сообщений пользователю через alert и консоль.
**Почему:** Пользователь должен понимать, что пошло не так (например, "заявка уже взята другим мастером").